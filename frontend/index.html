<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Details Management</title>
  <style>
  </style>
</head>
<body>
  <h1>Details Management</h1>
  <form id="addDetailForm">
    <label for="name">Name:</label>
    <input type="text" id="name" name="name" required>
    <label for="resume">Resume:</label>
    <input type="file" id="resume" name="resume" required>
    <button type="submit">Add Detail</button>
  </form>

  <div id="detailsList"></div>

  <script>
    async function fetchDetails() {
      const response = await fetch('http://localhost:3000/details');
      const details = await response.json();

      const detailsList = document.getElementById('detailsList');
      detailsList.innerHTML = '';

      details.forEach(detail => {
        const detailDiv = document.createElement('div');
        detailDiv.innerHTML = `
          <p>Name: ${detail.name}</p>
          <p>Resume Path: ${detail.resumePath}</p>
          <button onclick="deleteDetail(${detail.id})">Delete</button>
        `;
        detailsList.appendChild(detailDiv);
      });
    }
    async function addDetail(event) {
      event.preventDefault();

      const form = document.getElementById('addDetailForm');
      const formData = new FormData(form);

      await fetch('http://localhost:3000/details', {
        method: 'POST',
        body: formData,
      });

      form.reset();
      fetchDetails();
    }

    async function deleteDetail(id) {
      if (confirm('Are you sure you want to delete this detail?')) {
        await fetch(`http://localhost:3000/details/${id}`, {
          method: 'DELETE',
        });
        fetchDetails();
      }
    }
    fetchDetails();
    document.getElementById('addDetailForm').addEventListener('submit', addDetail);
  </script>
</body>
</html>
